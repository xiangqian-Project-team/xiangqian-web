{"version":3,"file":"static/chunks/app/login/page-796b853c61bca077.js","mappings":"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","sources":["webpack://_N_E/ignored|/Users/hezeying/xiangqian-web/node_modules/next/dist/shared/lib/router|./utils/resolve-rewrites","webpack://_N_E/","webpack://_N_E/./app/components/loginCard.js","webpack://_N_E/./app/service/index.js","webpack://_N_E/./app/utils/storage.js","webpack://_N_E/./image-loader.js","webpack://_N_E/./app/components/footer.module.scss","webpack://_N_E/./app/components/loginCard.module.scss","webpack://_N_E/./app/login/page.module.scss","webpack://_N_E/./app/img/logo.png","webpack://_N_E/./app/img/logo2.png","webpack://_N_E/<anon>"],"sourcesContent":["/* (ignored) */","import(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/app/components/footer.module.scss\");\nimport(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/app/components/loginCard.js\");\nimport(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/app/img/logo.png\");\nimport(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/app/img/logo2.png\");\nimport(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/app/login/page.module.scss\");\nimport(/* webpackMode: \"eager\" */ \"/Users/hezeying/xiangqian-web/node_modules/next/dist/client/image-component.js\")","/*\n * @Author: 何泽颖 hezeying@autowise.ai\n * @Date: 2024-02-23 10:47:08\n * @LastEditors: 何泽颖 hezeying@autowise.ai\n * @LastEditTime: 2024-03-05 18:51:45\n * @FilePath: /xiangqian-web/app/components/loginCard.js\n * @Description:\n */\n'use client';\nimport {\n  Button,\n  ConfigProvider,\n  Form,\n  Input,\n  message as antdMessage,\n} from 'antd';\n// import { useRouter } from 'next/navigation';\nimport { useRouter } from 'next-nprogress-bar';\nimport { useEffect, useRef, useState } from 'react';\nimport { getMessage as getMessageAsync, login as loginAsync } from '../service';\nimport { setItem } from '../utils/storage';\nimport styles from './loginCard.module.scss';\n\nfunction LoginCard() {\n  const [form] = Form.useForm();\n  const router = useRouter();\n  const timeId = useRef({ id: -1 });\n\n  const [count, setCount] = useState(60);\n  const [message, setMessage] = useState('');\n  const [messageLoading, setMessageLoading] = useState(false);\n  const [loginLoading, setLoginLoading] = useState(false);\n\n  const getMessage = async () => {\n    try {\n      const { phone } = await form?.validateFields();\n      setMessageLoading(true);\n      await getMessageAsync({ phone });\n      antdMessage.success('验证码发送成功');\n      // 开启倒计时\n      timeId.current.id = setInterval(() => {\n        setCount((count) => count - 1);\n      }, 1000);\n      setMessageLoading(false);\n    } catch (error) {\n      setMessageLoading(false);\n    }\n  };\n\n  const login = async () => {\n    try {\n      const { phone } = await form?.validateFields();\n      setLoginLoading(true);\n      const token = await loginAsync({\n        phone,\n        message,\n      });\n      antdMessage.success('登录成功，正在跳转回首页');\n      setTimeout(() => {\n        setItem('token', token);\n        setLoginLoading(false);\n        router.push('/');\n      }, 1000);\n    } catch (error) {\n      setLoginLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    // 当倒计时为0时 清除定时器\n    if (count === 0) {\n      clearInterval(timeId.current.id);\n      setCount(60);\n    }\n  }, [count]);\n\n  return (\n    <div className={styles.loginCard}>\n      <ConfigProvider\n        theme={{\n          token: {\n            colorPrimary: '#86F1D3',\n          },\n          components: {\n            Input: {\n              paddingBlockLG: 10,\n            },\n            Button: {\n              paddingInlineLG: 24,\n            },\n          },\n        }}\n      >\n        <div className={styles.loginCard_header}>手机号登录</div>\n        <Form form={form} name=\"phone\" style={{ width: '100%' }}>\n          <Form.Item\n            name=\"phone\"\n            rules={[\n              {\n                required: true,\n                message: '手机号输入错误',\n                pattern: new RegExp(/^1(3|4|5|6|7|8|9)\\d{9}$/, 'g'),\n              },\n            ]}\n          >\n            <Input placeholder=\"请输入手机号\" size=\"large\" />\n          </Form.Item>\n        </Form>\n\n        <div className={styles.loginCard_auth}>\n          <Input\n            placeholder=\"请输入验证码\"\n            size=\"large\"\n            value={message}\n            onChange={(e) => {\n              setMessage(e.target.value);\n            }}\n          />\n          <ConfigProvider\n            theme={{\n              token: {\n                colorPrimary: '#6F9EC1',\n              },\n            }}\n          >\n            {count === 60 ? (\n              <Button\n                size=\"large\"\n                type=\"primary\"\n                onClick={getMessage}\n                loading={messageLoading}\n              >\n                发送\n              </Button>\n            ) : (\n              <Button\n                size=\"large\"\n                type=\"primary\"\n                onClick={getMessage}\n                loading={messageLoading}\n                style={{ marginLeft: '12px' }}\n              >\n                {count}\n              </Button>\n            )}\n          </ConfigProvider>\n        </div>\n\n        <div className={styles.loginCard_tips}>\n          提示：未注册手机号验证后自动注册\n        </div>\n\n        <div className={styles.loginCard_login}>\n          <ConfigProvider\n            theme={{\n              token: {\n                colorPrimary: '#356CBC',\n              },\n            }}\n          >\n            <Button\n              size=\"large\"\n              type=\"primary\"\n              //   disabled={!(message && phone)}\n              onClick={login}\n              loading={loginLoading}\n            >\n              登录/注册\n            </Button>\n          </ConfigProvider>\n        </div>\n      </ConfigProvider>\n    </div>\n  );\n}\n\nexport default LoginCard;\n","/*\n * @Author: 何泽颖 hezeying@autowise.ai\n * @Date: 2024-02-02 17:01:50\n * @LastEditors: 何泽颖 hezeying@autowise.ai\n * @LastEditTime: 2024-03-05 20:08:31\n * @FilePath: /xiangqian-web/app/service/index.js\n * @Description:\n */\n\nimport { message } from 'antd';\n\nconst BASE_URL = 'http://47.97.101.11:8091';\n\nconst request = async (url, method, params) => {\n  const option = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  // const token = getItem('token');\n  // if (token) option.headers.token = token;\n\n  if (method === 'GET') url = `${url}?${new URLSearchParams(params)}`; // fetch不会自动把params参数拼接成查询字符串\n  if (method === 'POST') option['body'] = JSON.stringify(params);\n\n  const response = await fetch(url, option);\n\n  const { data, code, msg } = await response.json();\n\n  if (code === 6001) {\n    message.error(msg);\n    throw new Error(msg);\n  }\n\n  return data;\n};\n\n//  搜索\nexport const getPedia = (params) => {\n  return request(`${BASE_URL}/search/query`, 'GET', params);\n};\n\n//  获取验证码\nexport const getMessage = (params) => {\n  return request(`${BASE_URL}/public/send/message`, 'GET', params);\n};\n\n//  获取验证码\nexport const login = (params) => {\n  return request(`${BASE_URL}/public/login`, 'GET', params);\n};\n","/*\n * @Author: 何泽颖 hezeying@autowise.ai\n * @Date: 2023-10-12 19:24:41\n * @LastEditors: 何泽颖 hezeying@autowise.ai\n * @LastEditTime: 2024-03-05 18:56:25\n * @FilePath: /xiangqian-web/app/utils/storage.js\n * @Description:封装本地存储操作模块\n */\n\n/** 存储数据 */\nexport const setItem = (key, value) => {\n  if (typeof window !== 'undefined') {\n    if (value) localStorage.setItem(key, JSON.stringify(value));\n  }\n};\n\n/** 获取数据 */\nexport const getItem = (key) => {\n  if (typeof window !== 'undefined') {\n    return JSON.parse(localStorage.getItem(key));\n  }\n};\n\n/** 删除数据 */\nexport const removeItem = (key) => {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem(key);\n  }\n};\n","export default function myImageLoader({ src, width, quality }) {\n  return `${src}?w=${width}&q=${quality || 75}`;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__w5xY2\",\"footer_message\":\"footer_footer_message__QKxsO\",\"footer_message_line\":\"footer_footer_message_line__YK1j8\",\"footer_message_content\":\"footer_footer_message_content__xal_a\",\"footer_message_content_relation\":\"footer_footer_message_content_relation__smIk5\",\"footer_footer\":\"footer_footer_footer__HIMYS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginCard\":\"loginCard_loginCard__aK8gq\",\"loginCard_header\":\"loginCard_loginCard_header__i1lbN\",\"loginCard_auth\":\"loginCard_loginCard_auth__oajz5\",\"loginCard_tips\":\"loginCard_loginCard_tips__41UV6\",\"loginCard_login\":\"loginCard_loginCard_login__egITR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"page_login__j4zF3\",\"login_content\":\"page_login_content__OKoWP\",\"login_content_logo\":\"page_login_content_logo__cjwfA\",\"login_content_tips\":\"page_login_content_tips__bEzUE\"};","export default {\"src\":\"/_next/static/media/logo.5761352f.png\",\"height\":143,\"width\":321,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAf0lEQVR42mOYcXjv067dW5czMDAYK2tpRkpJS5tISUlpALEjEGsxzDq1+3H3ni1zgQrc5FWUpwIFoyUlJQOAuBWI7Rm6zq7/VHN49W2gAi9pJbleSWmpcKBEBBBnA7EpQ/rBKZOSd09rACqQltZS1JCQklSRkJCQFxcXB1ISigD3eSJPxzwOzgAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":4};","export default {\"src\":\"/_next/static/media/logo2.3d278eba.png\",\"height\":154,\"width\":127,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA3klEQVR42g2OvUoDQRSFz70zkzWsEXQTTGPAQthXECttjBgUfCWx8T0sLexsTCMItnYWFrHQqBjIL8nOzL2ZA6f4ig8+6j1dX3LmKhApGY7qowUTQWROBXDKQJ0A8ws8bwEHJvEYGNjisGzpbNlRLyj2m4P4Nz2CwrSbjX/aBroNYNd12vzxOXzZSWayviMwpov+zUle0XvZffx5658dszM+NYTFaJJT7/U2zCQ8fMnqfo837pDG6TU2YltcH5ZZfmWJzy0YCojXyKOwqGxuaqFwm2CQy9hGBeAlaKVB1tEUUnXVrhSMAAAAAElFTkSuQmCC\",\"blurWidth\":7,\"blurHeight\":8};"],"names":["Promise","resolve","then","__webpack_require__","t","bind","__webpack_exports__","form","Form","useForm","router","useRouter","timeId","useRef","id","count","setCount","useState","message","setMessage","messageLoading","setMessageLoading","loginLoading","setLoginLoading","getMessage","phone","validateFields","getMessageAsync","antdMessage","success","current","setInterval","error","login","token","loginAsync","setTimeout","setItem","push","useEffect","clearInterval","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","div","className","styles","jsxs","ConfigProvider","theme","colorPrimary","components","Input","paddingBlockLG","Button","paddingInlineLG","name","style","width","Item","rules","required","pattern","placeholder","size","value","onChange","e","target","type","onClick","loading","marginLeft","BASE_URL","request","url","method","params","option","headers","concat","URLSearchParams","JSON","stringify","response","fetch","data","code","msg","json","getPedia","key","localStorage","getItem","parse","myImageLoader","param","src","quality","module","exports"],"sourceRoot":""}